# 网络编程的基本概念

---

自从互联网诞生以来，一直都是在快速发展，现在几乎所有的程序都是网络程序，如手机应用、网站等。计算机网络就是把各个计算机连接到一起，让网络中的计算机可以互相通信。网络编程就是如何在程序中实现两台计算机的通信。

计算机除了安装浏览器外，还可以安装QQ，微信、网盘、邮件客户端等，不同的程序连接的计算机也会不同。确切的说，网络通信是两台计算机上的两个进程之间的通信。例如，浏览器进程和新浪服务器上的某个Web服务进程在通信，而QQ进程是与腾讯的某个服务器上的某个进程在通信。

## 网络基础知识

计算机和计算机之间是通过两个软件进程链接起来的。但如果要让这两个进程之间进行通信，还需要解决很多问题。OSI参考模型解决两个进程通信问题的方法是先分层，简单来说，这两个进程之间的通信是通过七大部分来完成的，也就是OSI七层参考模型。

开放系统互联(Open System Interconnection)七层网络模型称为开放式系统互联参考模型，是把网络通信在逻辑上定义，也可以理解为定义了通用的网络通信规范。而数据在网络中传输的过程，时间就是封装和解封装的过程。发送方通过各种封装处理，把数据转换成比特流的形式，比特流在信号传输的硬件媒介中传输，接收方再把比特流进行解封装处理。

![第6章 OSI七层模型](D:\repository\PythonNotes\images\第6章 OSI七层模型.png)

把用户的应用程序作为最高层，把物理通信线路作为最底层，将其间的协议处理分为若干层，规定每层处理的任务，也规定每层的接口标准。但OSI模型是一个理论上的网络通信模型。目前主要用于教学理解。在实际使用中，网络硬件基本都是参考TCP/IP模型。可以把TCP/IP模型理解为OSI模型的简化版本。从概念上来讲，TCP/IP协议族则把7层网络模型合并为4层，模型如下图。

![第6章 网络分层模型](D:\repository\PythonNotes\images\第6章 网络分层模型.png)

## 网络基本概念

### IP地址

IP地址用来表示计算机等网络设备的网络地址。IP地址分为IPv4和IPv6两大类，当前广泛使用的是IPv4.目前IPv4几乎耗尽，下一阶段必然会进行版本升级到IPv6.如果无特别注明，人们使用的IP地址所指的就是IPv4。

IP地址由32位二进制数组成，分为4段，每一段为8位二进制数，中间使用英文的标点符号“.”隔开。由于二进制数太长，为了便于记忆和识别，把每一段8位二进制数转换为十进制，大小为0~255。IP地址的这种表示法称为“点分十进制表示法”。IP地址可以表示为182.168.1.10.

Windows查看IP地址 `ipconfig`

Linux查看IP地址  `ifconfig`

### 主机名

主机名是计算机的名称，因特网上的Web站点由主机名识别。主机名有时也称为域名。主机名映射到IP地址，如博客园的地址是www.cnblogs.com。在因特网上IP地址和主机名是一一对应的，通过域名解析可以由主机名得到计算机的IP地址。

### 端口号

端口号是网络通信时同一机器上的不同进程的标识。端口号是为了在一台主机上提供更多的网络资源而采取的一种手段。其中0~1023是公认端口号，是为已经公认定义的软件保留的。例如，21端口分配给FTP服务，25端口分配给SMTP（简单邮件传输协议）服务，80端口分配给HTTP服务。

1024~65535是没有公共定义分端口号，用户可以自定义这些端口的作用。

Windows查看端口占用情况：`netstat -ano | findstr 3306`

Linux查看端口占用情况：`netstat -ano | grep 3306`

## 网络传输协议

TCP/IP(Transmission Control Protocol/Internet Protocol)即传输控制协议/网间协议，定义了主机如何连入因特网及数据如何在他们之间传输的标准。

![第6章 TCP-IP](D:\repository\PythonNotes\images\第6章 TCP-IP.png)

TCP是传输控制协议，是面向连接的，并且是一种可靠的协议。在基于TCP进行通信时，通信双方需要先建立一个TCP连接。建立连接时需要经过3次 握手，握手成功才可以进行通信。使用TCP协议传输，每次收发数据之前必须通过Connect()建立连接，这也是双向的，即任何一方都可以收发数据。协议本身提供了一些保障机制以保证它是可靠的、有序的，即每个包括按照发送的顺序到达接收方。

UDP(User Datagram Protocol)是用户数据报协议，是无连接的，不可靠的传输协议。UDP和TCP位于同一个传输层，但是UDP不保证数据包的传输顺序，也就是说，UDP传输不保证数据的正确性，UDP可能会丢包。当一个Socket(通常是Server Socket)等待建立连接时，另一个Socket可以要求进行连接，一旦两个Socket连接起来，就可以用Sendto发送数据，也可以用Recvfrom接收数据。根本不关心对方是否存在，是否发送了数据。它的特点是传输数据是比较快。